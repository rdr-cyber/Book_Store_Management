{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rajde/OneDrive/Desktop/Book_Store_Management/src/hooks/use-toast.ts"],"sourcesContent":["\"use client\"\n\n// Inspired by react-hot-toast library\nimport * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 171, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rajde/OneDrive/Desktop/Book_Store_Management/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,CAAA,GAAA,2JAAA,CAAA,UAAO,AAAD,EAAE,CAAA,GAAA,qIAAA,CAAA,OAAI,AAAD,EAAE;AACtB","debugId":null}},
    {"offset": {"line": 187, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rajde/OneDrive/Desktop/Book_Store_Management/src/components/ui/toast.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n"],"names":[],"mappings":";;;;;;;;;;AAEA;AACA;AACA;AACA;AAEA;AAPA;;;;;;;AASA,MAAM,gBAAgB,iKAAA,CAAA,WAAwB;AAE9C,MAAM,8BAAgB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iKAAA,CAAA,WAAwB;QACvB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,qIACA;QAED,GAAG,KAAK;;;;;;AAGb,cAAc,WAAW,GAAG,iKAAA,CAAA,WAAwB,CAAC,WAAW;AAEhE,MAAM,gBAAgB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACtB,6lBACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,MAAM,sBAAQ,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAI3B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAO,EAAE;IACnC,qBACE,8OAAC,iKAAA,CAAA,OAAoB;QACnB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGf;AACA,MAAM,WAAW,GAAG,iKAAA,CAAA,OAAoB,CAAC,WAAW;AAEpD,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iKAAA,CAAA,SAAsB;QACrB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,sgBACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,iKAAA,CAAA,SAAsB,CAAC,WAAW;AAE5D,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iKAAA,CAAA,QAAqB;QACpB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,yVACA;QAEF,eAAY;QACX,GAAG,KAAK;kBAET,cAAA,8OAAC,4LAAA,CAAA,IAAC;YAAC,WAAU;;;;;;;;;;;AAGjB,WAAW,WAAW,GAAG,iKAAA,CAAA,QAAqB,CAAC,WAAW;AAE1D,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iKAAA,CAAA,QAAqB;QACpB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,yBAAyB;QACtC,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG,iKAAA,CAAA,QAAqB,CAAC,WAAW;AAE1D,MAAM,iCAAmB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iKAAA,CAAA,cAA2B;QAC1B,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,sBAAsB;QACnC,GAAG,KAAK;;;;;;AAGb,iBAAiB,WAAW,GAAG,iKAAA,CAAA,cAA2B,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 300, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rajde/OneDrive/Desktop/Book_Store_Management/src/components/ui/toaster.tsx"],"sourcesContent":["\"use client\"\n\nimport { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AAYO,SAAS;IACd,MAAM,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,4HAAA,CAAA,WAAQ,AAAD;IAE1B,qBACE,8OAAC,iIAAA,CAAA,gBAAa;;YACX,OAAO,GAAG,CAAC,SAAU,EAAE,EAAE,EAAE,KAAK,EAAE,WAAW,EAAE,MAAM,EAAE,GAAG,OAAO;gBAChE,qBACE,8OAAC,iIAAA,CAAA,QAAK;oBAAW,GAAG,KAAK;;sCACvB,8OAAC;4BAAI,WAAU;;gCACZ,uBAAS,8OAAC,iIAAA,CAAA,aAAU;8CAAE;;;;;;gCACtB,6BACC,8OAAC,iIAAA,CAAA,mBAAgB;8CAAE;;;;;;;;;;;;wBAGtB;sCACD,8OAAC,iIAAA,CAAA,aAAU;;;;;;mBARD;;;;;YAWhB;0BACA,8OAAC,iIAAA,CAAA,gBAAa;;;;;;;;;;;AAGpB","debugId":null}},
    {"offset": {"line": 396, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rajde/OneDrive/Desktop/Book_Store_Management/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACvB,4VACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAC5B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,gKAAA,CAAA,OAAI,GAAG;IAC9B,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,OAAO,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 456, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rajde/OneDrive/Desktop/Book_Store_Management/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAC3B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,8OAAC;QACC,MAAM;QACN,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,kYACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 485, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rajde/OneDrive/Desktop/Book_Store_Management/src/components/ui/sheet.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;AAEA;AACA;AACA;AACA;AAEA;AAPA;;;;;;;AASA,MAAM,QAAQ,kKAAA,CAAA,OAAmB;AAEjC,MAAM,eAAe,kKAAA,CAAA,UAAsB;AAE3C,MAAM,aAAa,kKAAA,CAAA,QAAoB;AAEvC,MAAM,cAAc,kKAAA,CAAA,SAAqB;AAEzC,MAAM,6BAAe,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,UAAsB;QACrB,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,2JACA;QAED,GAAG,KAAK;QACT,KAAK;;;;;;AAGT,aAAa,WAAW,GAAG,kKAAA,CAAA,UAAsB,CAAC,WAAW;AAE7D,MAAM,gBAAgB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACtB,oMACA;IACE,UAAU;QACR,MAAM;YACJ,KAAK;YACL,QACE;YACF,MAAM;YACN,OACE;QACJ;IACF;IACA,iBAAiB;QACf,MAAM;IACR;AACF;AAOF,MAAM,6BAAe,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGlC,CAAC,EAAE,OAAO,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpD,8OAAC;;0BACC,8OAAC;;;;;0BACD,8OAAC,kKAAA,CAAA,UAAsB;gBACrB,KAAK;gBACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,cAAc;oBAAE;gBAAK,IAAI;gBACtC,GAAG,KAAK;;oBAER;kCACD,8OAAC,kKAAA,CAAA,QAAoB;wBAAC,WAAU;;0CAC9B,8OAAC,4LAAA,CAAA,IAAC;gCAAC,WAAU;;;;;;0CACb,8OAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAKlC,aAAa,WAAW,GAAG,kKAAA,CAAA,UAAsB,CAAC,WAAW;AAE7D,MAAM,cAAc,CAAC,EACnB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,oDACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG;AAE1B,MAAM,cAAc,CAAC,EACnB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,iEACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,QAAoB;QACnB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,yCAAyC;QACtD,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG,kKAAA,CAAA,QAAoB,CAAC,WAAW;AAEzD,MAAM,iCAAmB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,cAA0B;QACzB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,iBAAiB,WAAW,GAAG,kKAAA,CAAA,cAA0B,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 634, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rajde/OneDrive/Desktop/Book_Store_Management/src/components/ui/dropdown-menu.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AAAA;AAAA;AAEA;AANA;;;;;;AAQA,MAAM,eAAe,4KAAA,CAAA,OAA0B;AAE/C,MAAM,sBAAsB,4KAAA,CAAA,UAA6B;AAEzD,MAAM,oBAAoB,4KAAA,CAAA,QAA2B;AAErD,MAAM,qBAAqB,4KAAA,CAAA,SAA4B;AAEvD,MAAM,kBAAkB,4KAAA,CAAA,MAAyB;AAEjD,MAAM,yBAAyB,4KAAA,CAAA,aAAgC;AAE/D,MAAM,uCAAyB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAK5C,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBAC3C,8OAAC,4KAAA,CAAA,aAAgC;QAC/B,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,0MACA,SAAS,QACT;QAED,GAAG,KAAK;;YAER;0BACD,8OAAC,sNAAA,CAAA,eAAY;gBAAC,WAAU;;;;;;;;;;;;AAG5B,uBAAuB,WAAW,GAChC,4KAAA,CAAA,aAAgC,CAAC,WAAW;AAE9C,MAAM,uCAAyB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG5C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,4KAAA,CAAA,aAAgC;QAC/B,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,ybACA;QAED,GAAG,KAAK;;;;;;AAGb,uBAAuB,WAAW,GAChC,4KAAA,CAAA,aAAgC,CAAC,WAAW;AAE9C,MAAM,oCAAsB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGzC,CAAC,EAAE,SAAS,EAAE,aAAa,CAAC,EAAE,GAAG,OAAO,EAAE,oBAC1C,8OAAC,4KAAA,CAAA,SAA4B;kBAC3B,cAAA,8OAAC,4KAAA,CAAA,UAA6B;YAC5B,KAAK;YACL,YAAY;YACZ,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,ybACA;YAED,GAAG,KAAK;;;;;;;;;;;AAIf,oBAAoB,WAAW,GAAG,4KAAA,CAAA,UAA6B,CAAC,WAAW;AAE3E,MAAM,iCAAmB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAKtC,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,OAAO,EAAE,oBACjC,8OAAC,4KAAA,CAAA,OAA0B;QACzB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,qSACA,SAAS,QACT;QAED,GAAG,KAAK;;;;;;AAGb,iBAAiB,WAAW,GAAG,4KAAA,CAAA,OAA0B,CAAC,WAAW;AAErE,MAAM,yCAA2B,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG9C,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,OAAO,EAAE,GAAG,OAAO,EAAE,oBAC7C,8OAAC,4KAAA,CAAA,eAAkC;QACjC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,wOACA;QAEF,SAAS;QACR,GAAG,KAAK;;0BAET,8OAAC;gBAAK,WAAU;0BACd,cAAA,8OAAC,4KAAA,CAAA,gBAAmC;8BAClC,cAAA,8OAAC,oMAAA,CAAA,QAAK;wBAAC,WAAU;;;;;;;;;;;;;;;;YAGpB;;;;;;;AAGL,yBAAyB,WAAW,GAClC,4KAAA,CAAA,eAAkC,CAAC,WAAW;AAEhD,MAAM,sCAAwB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG3C,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC,4KAAA,CAAA,YAA+B;QAC9B,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,wOACA;QAED,GAAG,KAAK;;0BAET,8OAAC;gBAAK,WAAU;0BACd,cAAA,8OAAC,4KAAA,CAAA,gBAAmC;8BAClC,cAAA,8OAAC,sMAAA,CAAA,SAAM;wBAAC,WAAU;;;;;;;;;;;;;;;;YAGrB;;;;;;;AAGL,sBAAsB,WAAW,GAAG,4KAAA,CAAA,YAA+B,CAAC,WAAW;AAE/E,MAAM,kCAAoB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAKvC,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,OAAO,EAAE,oBACjC,8OAAC,4KAAA,CAAA,QAA2B;QAC1B,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,qCACA,SAAS,QACT;QAED,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG,4KAAA,CAAA,QAA2B,CAAC,WAAW;AAEvE,MAAM,sCAAwB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG3C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,4KAAA,CAAA,YAA+B;QAC9B,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,4BAA4B;QACzC,GAAG,KAAK;;;;;;AAGb,sBAAsB,WAAW,GAAG,4KAAA,CAAA,YAA+B,CAAC,WAAW;AAE/E,MAAM,uBAAuB,CAAC,EAC5B,SAAS,EACT,GAAG,OACmC;IACtC,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,8CAA8C;QAC3D,GAAG,KAAK;;;;;;AAGf;AACA,qBAAqB,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 841, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rajde/OneDrive/Desktop/Book_Store_Management/src/components/ui/tooltip.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,kBAAkB,mKAAA,CAAA,WAAyB;AAEjD,MAAM,UAAU,mKAAA,CAAA,OAAqB;AAErC,MAAM,iBAAiB,mKAAA,CAAA,UAAwB;AAE/C,MAAM,+BAAiB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGpC,CAAC,EAAE,SAAS,EAAE,aAAa,CAAC,EAAE,GAAG,OAAO,EAAE,oBAC1C,8OAAC,mKAAA,CAAA,UAAwB;QACvB,KAAK;QACL,YAAY;QACZ,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,sYACA;QAED,GAAG,KAAK;;;;;;AAGb,eAAe,WAAW,GAAG,mKAAA,CAAA,UAAwB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 877, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rajde/OneDrive/Desktop/Book_Store_Management/src/components/Footer.tsx"],"sourcesContent":["\n\"use client\";\n\nimport { useState, useEffect } from 'react';\nimport Link from \"next/link\";\nimport { BookOpenCheck } from \"lucide-react\";\nimport {\n    Tooltip,\n    TooltipContent,\n    TooltipProvider,\n    TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\n\nconst InstagramIcon = (props: React.SVGProps<SVGSVGElement>) => (\n    <svg\n      {...props}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\"\n      height=\"24\"\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    >\n      <rect width=\"20\" height=\"20\" x=\"2\" y=\"2\" rx=\"5\" ry=\"5\" />\n      <path d=\"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z\" />\n      <line x1=\"17.5\" x2=\"17.51\" y1=\"6.5\" y2=\"6.5\" />\n    </svg>\n);\n\nconst GithubIcon = (props: React.SVGProps<SVGSVGElement>) => (\n  <svg\n    {...props}\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"24\"\n    height=\"24\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth=\"2\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n  >\n    <path d=\"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4\" />\n    <path d=\"M9 18c-4.51 2-5-2-7-2\" />\n  </svg>\n);\n\nconst ClashOfClansIcon = (props: React.SVGProps<SVGSVGElement>) => (\n  <svg \n    {...props}\n    xmlns=\"http://www.w3.org/2000/svg\" \n    width=\"24\" \n    height=\"24\" \n    viewBox=\"0 0 24 24\"\n    fill=\"currentColor\"\n    stroke=\"#D4AF37\"\n    strokeWidth=\"1\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n  >\n    <path d=\"M12 2L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-3z\" fill=\"#4a4a4a\"/>\n    <path d=\"M12 2L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-3z\" stroke=\"#C0C0C0\" strokeWidth=\"0.5\" fill=\"none\"/>\n    <path d=\"M12 12l3-1.5-3-1.5-3 1.5 3 1.5z\" fill=\"#D4AF37\" />\n    <path d=\"M12 12v4l3 1.5v-4l-3-1.5z\" fill=\"#B8860B\" />\n    <path d=\"M12 12v4l-3 1.5v-4l3-1.5z\" fill=\"#DAA520\" />\n </svg>\n);\n\n\nexport default function Footer() {\n  const [year, setYear] = useState(new Date().getFullYear());\n  \n  useEffect(() => {\n      setYear(new Date().getFullYear());\n  }, []);\n\n  return (\n    <footer className=\"bg-secondary border-t\">\n      <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"flex flex-col items-center justify-between md:flex-row\">\n          <div className=\"flex items-center space-x-2 mb-4 md:mb-0\">\n            <BookOpenCheck className=\"h-6 w-6 text-primary\" />\n            <span className=\"text-lg font-bold font-headline\">ShelfWise</span>\n          </div>\n          <p className=\"text-sm text-muted-foreground\">\n            Â© {year} ShelfWise. All rights reserved.\n          </p>\n          <TooltipProvider>\n            <div className=\"flex items-center space-x-4 mt-4 md:mt-0\">\n                <Tooltip>\n                    <TooltipTrigger asChild>\n                        <Link\n                            href=\"https://link.clashofclans.com/en?action=OpenPlayerProfile&tag=G0LPLP8J0\"\n                            className=\"text-muted-foreground hover:text-foreground transition-transform duration-300 hover:scale-110\"\n                        >\n                            <ClashOfClansIcon className=\"h-5 w-5\" />\n                            <span className=\"sr-only\">Clash of Clans</span>\n                        </Link>\n                    </TooltipTrigger>\n                    <TooltipContent>\n                        <p>My Clash Of Clans Account....</p>\n                    </TooltipContent>\n                </Tooltip>\n\n                <Tooltip>\n                    <TooltipTrigger asChild>\n                         <Link\n                            href=\"https://www.instagram.com/debadyutidey7?igsh=eGdlYm93c3ZxYjUy\"\n                            className=\"text-muted-foreground hover:text-foreground transition-transform duration-300 hover:scale-110\"\n                            >\n                            <InstagramIcon className=\"h-5 w-5\" />\n                            <span className=\"sr-only\">Instagram</span>\n                        </Link>\n                    </TooltipTrigger>\n                    <TooltipContent>\n                        <p>My Instagram Account....</p>\n                    </TooltipContent>\n                </Tooltip>\n\n                <Tooltip>\n                    <TooltipTrigger asChild>\n                        <Link\n                            href=\"https://github.com/debadyutidey007/Book_Store_Management\"\n                            className=\"text-muted-foreground hover:text-foreground transition-transform duration-300 hover:scale-110\"\n                        >\n                            <GithubIcon className=\"h-5 w-5\" />\n                            <span className=\"sr-only\">GitHub</span>\n                        </Link>\n                    </TooltipTrigger>\n                    <TooltipContent>\n                        <p>My GitHub Account....</p>\n                    </TooltipContent>\n                </Tooltip>\n            </div>\n          </TooltipProvider>\n        </div>\n      </div>\n    </footer>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1323, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rajde/OneDrive/Desktop/Book_Store_Management/src/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\nimport { createBrowserClient } from '@supabase/ssr';\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;\r\n\r\n// Client-side Supabase client\r\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);\r\n\r\n// Browser client for SSR\r\nexport const createSupabaseBrowserClient = () => {\r\n  return createBrowserClient(supabaseUrl, supabaseAnonKey);\r\n};\r\n\r\n// Database Tables Schema Types\r\nexport type Database = {\r\n  public: {\r\n    Tables: {\r\n      users: {\r\n        Row: {\r\n          id: string;\r\n          email: string;\r\n          first_name: string;\r\n          last_name: string;\r\n          role: 'reader' | 'author' | 'admin';\r\n          avatar_url?: string;\r\n          bio?: string;\r\n          created_at: string;\r\n          updated_at: string;\r\n          is_active: boolean;\r\n          // Author specific\r\n          author_verified?: boolean;\r\n          total_books?: number;\r\n          total_sales?: number;\r\n          total_revenue?: number;\r\n          // Reader specific\r\n          followed_authors?: string[];\r\n          purchased_books?: string[];\r\n        };\r\n        Insert: {\r\n          id?: string;\r\n          email: string;\r\n          first_name: string;\r\n          last_name: string;\r\n          role: 'reader' | 'author' | 'admin';\r\n          avatar_url?: string;\r\n          bio?: string;\r\n          created_at?: string;\r\n          updated_at?: string;\r\n          is_active?: boolean;\r\n          author_verified?: boolean;\r\n          total_books?: number;\r\n          total_sales?: number;\r\n          total_revenue?: number;\r\n          followed_authors?: string[];\r\n          purchased_books?: string[];\r\n        };\r\n        Update: {\r\n          id?: string;\r\n          email?: string;\r\n          first_name?: string;\r\n          last_name?: string;\r\n          role?: 'reader' | 'author' | 'admin';\r\n          avatar_url?: string;\r\n          bio?: string;\r\n          updated_at?: string;\r\n          is_active?: boolean;\r\n          author_verified?: boolean;\r\n          total_books?: number;\r\n          total_sales?: number;\r\n          total_revenue?: number;\r\n          followed_authors?: string[];\r\n          purchased_books?: string[];\r\n        };\r\n      };\r\n      books: {\r\n        Row: {\r\n          id: string;\r\n          title: string;\r\n          author_name: string;\r\n          author_id: string;\r\n          price: number;\r\n          image_url?: string;\r\n          description: string;\r\n          category: string;\r\n          cover_type: string;\r\n          stock: number;\r\n          reorder_point: number;\r\n          book_file_url?: string;\r\n          published_at: string;\r\n          updated_at: string;\r\n          sales: number;\r\n          revenue: number;\r\n          average_rating: number;\r\n          total_reviews: number;\r\n        };\r\n        Insert: {\r\n          id?: string;\r\n          title: string;\r\n          author_name: string;\r\n          author_id: string;\r\n          price: number;\r\n          image_url?: string;\r\n          description: string;\r\n          category: string;\r\n          cover_type: string;\r\n          stock: number;\r\n          reorder_point: number;\r\n          book_file_url?: string;\r\n          published_at?: string;\r\n          updated_at?: string;\r\n          sales?: number;\r\n          revenue?: number;\r\n          average_rating?: number;\r\n          total_reviews?: number;\r\n        };\r\n        Update: {\r\n          title?: string;\r\n          author_name?: string;\r\n          price?: number;\r\n          image_url?: string;\r\n          description?: string;\r\n          category?: string;\r\n          cover_type?: string;\r\n          stock?: number;\r\n          reorder_point?: number;\r\n          book_file_url?: string;\r\n          updated_at?: string;\r\n          sales?: number;\r\n          revenue?: number;\r\n          average_rating?: number;\r\n          total_reviews?: number;\r\n        };\r\n      };\r\n      orders: {\r\n        Row: {\r\n          id: string;\r\n          user_id: string;\r\n          books: any;\r\n          total_amount: number;\r\n          status: string;\r\n          payment_method: string;\r\n          payment_gateway: string;\r\n          payment_id?: string;\r\n          order_id?: string;\r\n          created_at: string;\r\n          completed_at?: string;\r\n          shipping_address?: any;\r\n        };\r\n        Insert: {\r\n          id?: string;\r\n          user_id: string;\r\n          books: any;\r\n          total_amount: number;\r\n          status: string;\r\n          payment_method: string;\r\n          payment_gateway: string;\r\n          payment_id?: string;\r\n          order_id?: string;\r\n          created_at?: string;\r\n          completed_at?: string;\r\n          shipping_address?: any;\r\n        };\r\n        Update: {\r\n          status?: string;\r\n          payment_id?: string;\r\n          completed_at?: string;\r\n        };\r\n      };\r\n      reviews: {\r\n        Row: {\r\n          id: string;\r\n          book_id: string;\r\n          user_id: string;\r\n          username: string;\r\n          rating: number;\r\n          comment: string;\r\n          created_at: string;\r\n          author_reply?: string;\r\n          reader_follow_up?: string;\r\n        };\r\n        Insert: {\r\n          id?: string;\r\n          book_id: string;\r\n          user_id: string;\r\n          username: string;\r\n          rating: number;\r\n          comment: string;\r\n          created_at?: string;\r\n          author_reply?: string;\r\n          reader_follow_up?: string;\r\n        };\r\n        Update: {\r\n          rating?: number;\r\n          comment?: string;\r\n          author_reply?: string;\r\n          reader_follow_up?: string;\r\n        };\r\n      };\r\n      follows: {\r\n        Row: {\r\n          id: string;\r\n          reader_id: string;\r\n          author_id: string;\r\n          followed_at: string;\r\n        };\r\n        Insert: {\r\n          id?: string;\r\n          reader_id: string;\r\n          author_id: string;\r\n          followed_at?: string;\r\n        };\r\n        Update: {};\r\n      };\r\n    };\r\n  };\r\n};\r\n\r\nexport default supabase;"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;;;AAEA,MAAM;AACN,MAAM;AAGC,MAAM,WAAW,CAAA,GAAA,uLAAA,CAAA,eAAY,AAAD,EAAE,aAAa;AAG3C,MAAM,8BAA8B;IACzC,OAAO,CAAA,GAAA,0KAAA,CAAA,sBAAmB,AAAD,EAAE,aAAa;AAC1C;uCA8Me","debugId":null}},
    {"offset": {"line": 1346, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rajde/OneDrive/Desktop/Book_Store_Management/src/lib/database.ts"],"sourcesContent":["import { supabase } from './supabase';\r\nimport { \r\n  User, \r\n  Book, \r\n  Order, \r\n  Review, \r\n  Follow, \r\n  Transaction, \r\n  AuthorAnalytics, \r\n  ReviewConversation \r\n} from './types';\r\n\r\n// User Management\r\nexport const createUser = async (userData: Omit<User, 'id'>) => {\r\n  try {\r\n    const { data, error } = await supabase\r\n      .from('users')\r\n      .insert({\r\n        email: userData.email,\r\n        first_name: userData.firstName,\r\n        last_name: userData.lastName,\r\n        role: userData.role,\r\n        avatar_url: userData.avatarUrl,\r\n        bio: userData.bio,\r\n        is_active: true,\r\n        followed_authors: userData.role === 'reader' ? [] : undefined,\r\n        purchased_books: userData.role === 'reader' ? [] : undefined,\r\n        author_verified: userData.role === 'author' ? false : undefined,\r\n        total_books: userData.role === 'author' ? 0 : undefined,\r\n        total_sales: userData.role === 'author' ? 0 : undefined,\r\n        total_revenue: userData.role === 'author' ? 0 : undefined,\r\n      })\r\n      .select()\r\n      .single();\r\n    \r\n    if (error) throw error;\r\n    return data.id;\r\n  } catch (error) {\r\n    console.error('Error creating user:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const getUserByEmail = async (email: string): Promise<User | null> => {\r\n  try {\r\n    const { data, error } = await supabase\r\n      .from('users')\r\n      .select('*')\r\n      .eq('email', email)\r\n      .single();\r\n    \r\n    if (error && error.code !== 'PGRST116') throw error;\r\n    if (!data) return null;\r\n    \r\n    return {\r\n      id: data.id,\r\n      firstName: data.first_name,\r\n      lastName: data.last_name,\r\n      email: data.email,\r\n      role: data.role,\r\n      avatarUrl: data.avatar_url,\r\n      bio: data.bio,\r\n      createdAt: data.created_at,\r\n      isActive: data.is_active,\r\n      followedAuthors: data.followed_authors,\r\n      purchasedBooks: data.purchased_books,\r\n      authorVerified: data.author_verified,\r\n      totalBooks: data.total_books,\r\n      totalSales: data.total_sales,\r\n      totalRevenue: data.total_revenue,\r\n    } as User;\r\n  } catch (error) {\r\n    console.error('Error getting user by email:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const getUserById = async (userId: string): Promise<User | null> => {\r\n  try {\r\n    const { data, error } = await supabase\r\n      .from('users')\r\n      .select('*')\r\n      .eq('id', userId)\r\n      .single();\r\n    \r\n    if (error && error.code !== 'PGRST116') throw error;\r\n    if (!data) return null;\r\n    \r\n    return {\r\n      id: data.id,\r\n      firstName: data.first_name,\r\n      lastName: data.last_name,\r\n      email: data.email,\r\n      role: data.role,\r\n      avatarUrl: data.avatar_url,\r\n      bio: data.bio,\r\n      createdAt: data.created_at,\r\n      isActive: data.is_active,\r\n      followedAuthors: data.followed_authors,\r\n      purchasedBooks: data.purchased_books,\r\n      authorVerified: data.author_verified,\r\n      totalBooks: data.total_books,\r\n      totalSales: data.total_sales,\r\n      totalRevenue: data.total_revenue,\r\n    } as User;\r\n  } catch (error) {\r\n    console.error('Error getting user by ID:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const updateUser = async (userId: string, updates: Partial<User>) => {\r\n  try {\r\n    const updateData: any = {};\r\n    if (updates.firstName) updateData.first_name = updates.firstName;\r\n    if (updates.lastName) updateData.last_name = updates.lastName;\r\n    if (updates.email) updateData.email = updates.email;\r\n    if (updates.role) updateData.role = updates.role;\r\n    if (updates.avatarUrl) updateData.avatar_url = updates.avatarUrl;\r\n    if (updates.bio) updateData.bio = updates.bio;\r\n    if (updates.isActive !== undefined) updateData.is_active = updates.isActive;\r\n    if (updates.followedAuthors) updateData.followed_authors = updates.followedAuthors;\r\n    if (updates.purchasedBooks) updateData.purchased_books = updates.purchasedBooks;\r\n    if (updates.authorVerified !== undefined) updateData.author_verified = updates.authorVerified;\r\n    if (updates.totalBooks !== undefined) updateData.total_books = updates.totalBooks;\r\n    if (updates.totalSales !== undefined) updateData.total_sales = updates.totalSales;\r\n    if (updates.totalRevenue !== undefined) updateData.total_revenue = updates.totalRevenue;\r\n    \r\n    updateData.updated_at = new Date().toISOString();\r\n    \r\n    const { error } = await supabase\r\n      .from('users')\r\n      .update(updateData)\r\n      .eq('id', userId);\r\n    \r\n    if (error) throw error;\r\n  } catch (error) {\r\n    console.error('Error updating user:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Book Management\r\nexport const createBook = async (bookData: Omit<Book, 'id'>) => {\r\n  try {\r\n    const { data, error } = await supabase\r\n      .from('books')\r\n      .insert({\r\n        title: bookData.title,\r\n        author_name: bookData.authorName,\r\n        author_id: bookData.authorId,\r\n        price: bookData.price,\r\n        image_url: bookData.imageUrl,\r\n        description: bookData.description,\r\n        category: bookData.category,\r\n        cover_type: bookData.coverType,\r\n        stock: bookData.stock,\r\n        reorder_point: bookData.reorderPoint,\r\n        book_file_url: bookData.bookFileUrl,\r\n        sales: 0,\r\n        revenue: 0,\r\n        average_rating: 0,\r\n        total_reviews: 0,\r\n      })\r\n      .select()\r\n      .single();\r\n    \r\n    if (error) throw error;\r\n    \r\n    // Update author's book count\r\n    const { error: updateError } = await supabase.rpc('increment_user_books', {\r\n      user_id: bookData.authorId\r\n    });\r\n    \r\n    if (updateError) {\r\n      // Fallback: manually update\r\n      const { data: userData } = await supabase\r\n        .from('users')\r\n        .select('total_books')\r\n        .eq('id', bookData.authorId)\r\n        .single();\r\n      \r\n      await supabase\r\n        .from('users')\r\n        .update({ total_books: (userData?.total_books || 0) + 1 })\r\n        .eq('id', bookData.authorId);\r\n    }\r\n    \r\n    return data.id;\r\n  } catch (error) {\r\n    console.error('Error creating book:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const getBooksByAuthor = async (authorId: string): Promise<Book[]> => {\r\n  try {\r\n    const { data, error } = await supabase\r\n      .from('books')\r\n      .select('*')\r\n      .eq('author_id', authorId)\r\n      .order('published_at', { ascending: false });\r\n    \r\n    if (error) throw error;\r\n    \r\n    return (data || []).map(book => ({\r\n      id: book.id,\r\n      title: book.title,\r\n      authorName: book.author_name,\r\n      authorId: book.author_id,\r\n      price: book.price,\r\n      imageUrl: book.image_url,\r\n      description: book.description,\r\n      category: book.category,\r\n      coverType: book.cover_type,\r\n      stock: book.stock,\r\n      reorderPoint: book.reorder_point,\r\n      bookFileUrl: book.book_file_url,\r\n      publishedAt: book.published_at,\r\n      sales: book.sales,\r\n      revenue: book.revenue,\r\n      averageRating: book.average_rating,\r\n      totalReviews: book.total_reviews,\r\n    } as Book));\r\n  } catch (error) {\r\n    console.error('Error getting books by author:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const getAllBooks = async (): Promise<Book[]> => {\r\n  try {\r\n    const { data, error } = await supabase\r\n      .from('books')\r\n      .select('*')\r\n      .order('published_at', { ascending: false });\r\n    \r\n    if (error) throw error;\r\n    \r\n    return (data || []).map(book => ({\r\n      id: book.id,\r\n      title: book.title,\r\n      authorName: book.author_name,\r\n      authorId: book.author_id,\r\n      price: book.price,\r\n      imageUrl: book.image_url,\r\n      description: book.description,\r\n      category: book.category,\r\n      coverType: book.cover_type,\r\n      stock: book.stock,\r\n      reorderPoint: book.reorder_point,\r\n      bookFileUrl: book.book_file_url,\r\n      publishedAt: book.published_at,\r\n      sales: book.sales,\r\n      revenue: book.revenue,\r\n      averageRating: book.average_rating,\r\n      totalReviews: book.total_reviews,\r\n    } as Book));\r\n  } catch (error) {\r\n    console.error('Error getting all books:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const getBookById = async (bookId: string): Promise<Book | null> => {\r\n  try {\r\n    const { data, error } = await supabase\r\n      .from('books')\r\n      .select('*')\r\n      .eq('id', bookId)\r\n      .single();\r\n    \r\n    if (error && error.code !== 'PGRST116') throw error;\r\n    if (!data) return null;\r\n    \r\n    return {\r\n      id: data.id,\r\n      title: data.title,\r\n      authorName: data.author_name,\r\n      authorId: data.author_id,\r\n      price: data.price,\r\n      imageUrl: data.image_url,\r\n      description: data.description,\r\n      category: data.category,\r\n      coverType: data.cover_type,\r\n      stock: data.stock,\r\n      reorderPoint: data.reorder_point,\r\n      bookFileUrl: data.book_file_url,\r\n      publishedAt: data.published_at,\r\n      sales: data.sales,\r\n      revenue: data.revenue,\r\n      averageRating: data.average_rating,\r\n      totalReviews: data.total_reviews,\r\n    } as Book;\r\n  } catch (error) {\r\n    console.error('Error getting book by ID:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const updateBook = async (bookId: string, updates: Partial<Book>) => {\r\n  try {\r\n    const updateData: any = {};\r\n    if (updates.title) updateData.title = updates.title;\r\n    if (updates.authorName) updateData.author_name = updates.authorName;\r\n    if (updates.price !== undefined) updateData.price = updates.price;\r\n    if (updates.imageUrl) updateData.image_url = updates.imageUrl;\r\n    if (updates.description) updateData.description = updates.description;\r\n    if (updates.category) updateData.category = updates.category;\r\n    if (updates.coverType) updateData.cover_type = updates.coverType;\r\n    if (updates.stock !== undefined) updateData.stock = updates.stock;\r\n    if (updates.reorderPoint !== undefined) updateData.reorder_point = updates.reorderPoint;\r\n    if (updates.bookFileUrl) updateData.book_file_url = updates.bookFileUrl;\r\n    if (updates.sales !== undefined) updateData.sales = updates.sales;\r\n    if (updates.revenue !== undefined) updateData.revenue = updates.revenue;\r\n    if (updates.averageRating !== undefined) updateData.average_rating = updates.averageRating;\r\n    if (updates.totalReviews !== undefined) updateData.total_reviews = updates.totalReviews;\r\n    \r\n    updateData.updated_at = new Date().toISOString();\r\n    \r\n    const { error } = await supabase\r\n      .from('books')\r\n      .update(updateData)\r\n      .eq('id', bookId);\r\n    \r\n    if (error) throw error;\r\n  } catch (error) {\r\n    console.error('Error updating book:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Order Management\r\nexport const createOrder = async (orderData: Omit<Order, 'id'>) => {\r\n  try {\r\n    const { data, error } = await supabase\r\n      .from('orders')\r\n      .insert({\r\n        user_id: orderData.userId,\r\n        books: orderData.books,\r\n        total_amount: orderData.totalAmount,\r\n        status: orderData.status,\r\n        payment_method: orderData.paymentMethod,\r\n        payment_gateway: orderData.paymentGateway,\r\n        payment_id: orderData.paymentId,\r\n        order_id: orderData.orderId,\r\n        shipping_address: orderData.shippingAddress,\r\n      })\r\n      .select()\r\n      .single();\r\n    \r\n    if (error) throw error;\r\n    return data.id;\r\n  } catch (error) {\r\n    console.error('Error creating order:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const updateOrderStatus = async (orderId: string, status: Order['status'], paymentId?: string) => {\r\n  try {\r\n    const updates: any = { status };\r\n    if (paymentId) {\r\n      updates.payment_id = paymentId;\r\n    }\r\n    if (status === 'completed') {\r\n      updates.completed_at = new Date().toISOString();\r\n    }\r\n    \r\n    const { error } = await supabase\r\n      .from('orders')\r\n      .update(updates)\r\n      .eq('id', orderId);\r\n    \r\n    if (error) throw error;\r\n    \r\n    // If order is completed, update book sales and user purchased books\r\n    if (status === 'completed') {\r\n      const { data: order } = await supabase\r\n        .from('orders')\r\n        .select('*')\r\n        .eq('id', orderId)\r\n        .single();\r\n      \r\n      if (order) {\r\n        // Update each book's sales and revenue\r\n        for (const item of order.books) {\r\n          const { data: book } = await supabase\r\n            .from('books')\r\n            .select('sales, revenue, stock, author_id')\r\n            .eq('id', item.bookId)\r\n            .single();\r\n          \r\n          if (book) {\r\n            await supabase\r\n              .from('books')\r\n              .update({\r\n                sales: (book.sales || 0) + item.quantity,\r\n                revenue: (book.revenue || 0) + (item.price * item.quantity),\r\n                stock: (book.stock || 0) - item.quantity\r\n              })\r\n              .eq('id', item.bookId);\r\n            \r\n            // Update author stats\r\n            const { data: author } = await supabase\r\n              .from('users')\r\n              .select('total_sales, total_revenue')\r\n              .eq('id', book.author_id)\r\n              .single();\r\n            \r\n            if (author) {\r\n              await supabase\r\n                .from('users')\r\n                .update({\r\n                  total_sales: (author.total_sales || 0) + item.quantity,\r\n                  total_revenue: (author.total_revenue || 0) + (item.price * item.quantity)\r\n                })\r\n                .eq('id', book.author_id);\r\n            }\r\n          }\r\n        }\r\n        \r\n        // Update user's purchased books\r\n        const purchasedBookIds = order.books.map((item: any) => item.bookId);\r\n        const { data: user } = await supabase\r\n          .from('users')\r\n          .select('purchased_books')\r\n          .eq('id', order.user_id)\r\n          .single();\r\n        \r\n        if (user) {\r\n          const updatedPurchasedBooks = [...(user.purchased_books || []), ...purchasedBookIds];\r\n          await supabase\r\n            .from('users')\r\n            .update({ purchased_books: updatedPurchasedBooks })\r\n            .eq('id', order.user_id);\r\n        }\r\n      }\r\n    }\r\n  } catch (error) {\r\n    console.error('Error updating order status:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const getUserOrders = async (userId: string): Promise<Order[]> => {\r\n  try {\r\n    const { data, error } = await supabase\r\n      .from('orders')\r\n      .select('*')\r\n      .eq('user_id', userId)\r\n      .order('created_at', { ascending: false });\r\n    \r\n    if (error) throw error;\r\n    \r\n    return (data || []).map(order => ({\r\n      id: order.id,\r\n      userId: order.user_id,\r\n      books: order.books,\r\n      totalAmount: order.total_amount,\r\n      status: order.status,\r\n      paymentMethod: order.payment_method,\r\n      paymentGateway: order.payment_gateway,\r\n      paymentId: order.payment_id,\r\n      orderId: order.order_id,\r\n      createdAt: order.created_at,\r\n      completedAt: order.completed_at,\r\n      shippingAddress: order.shipping_address,\r\n    } as Order));\r\n  } catch (error) {\r\n    console.error('Error getting user orders:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Review Management\r\nexport const createReview = async (reviewData: Omit<Review, 'id'>) => {\r\n  try {\r\n    const { data, error } = await supabase\r\n      .from('reviews')\r\n      .insert({\r\n        book_id: reviewData.bookId,\r\n        user_id: reviewData.userId,\r\n        username: reviewData.username,\r\n        rating: reviewData.rating,\r\n        comment: reviewData.comment,\r\n        author_reply: reviewData.authorReply,\r\n        reader_follow_up: reviewData.readerFollowUp,\r\n      })\r\n      .select()\r\n      .single();\r\n    \r\n    if (error) throw error;\r\n    \r\n    // Update book's review stats\r\n    const { data: reviews } = await supabase\r\n      .from('reviews')\r\n      .select('rating')\r\n      .eq('book_id', reviewData.bookId);\r\n    \r\n    if (reviews) {\r\n      const totalRating = reviews.reduce((sum, review) => sum + review.rating, 0);\r\n      const totalReviews = reviews.length;\r\n      const averageRating = totalRating / totalReviews;\r\n      \r\n      await supabase\r\n        .from('books')\r\n        .update({\r\n          total_reviews: totalReviews,\r\n          average_rating: averageRating\r\n        })\r\n        .eq('id', reviewData.bookId);\r\n    }\r\n    \r\n    return data.id;\r\n  } catch (error) {\r\n    console.error('Error creating review:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const getBookReviews = async (bookId: string): Promise<Review[]> => {\r\n  try {\r\n    const { data, error } = await supabase\r\n      .from('reviews')\r\n      .select('*')\r\n      .eq('book_id', bookId)\r\n      .order('created_at', { ascending: false });\r\n    \r\n    if (error) throw error;\r\n    \r\n    return (data || []).map(review => ({\r\n      id: review.id,\r\n      bookId: review.book_id,\r\n      userId: review.user_id,\r\n      username: review.username,\r\n      rating: review.rating,\r\n      comment: review.comment,\r\n      createdAt: review.created_at,\r\n      authorReply: review.author_reply,\r\n      readerFollowUp: review.reader_follow_up,\r\n    } as Review));\r\n  } catch (error) {\r\n    console.error('Error getting book reviews:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const updateReview = async (reviewId: string, updates: Partial<Review>) => {\r\n  try {\r\n    const updateData: any = {};\r\n    if (updates.rating !== undefined) updateData.rating = updates.rating;\r\n    if (updates.comment) updateData.comment = updates.comment;\r\n    if (updates.authorReply !== undefined) updateData.author_reply = updates.authorReply;\r\n    if (updates.readerFollowUp !== undefined) updateData.reader_follow_up = updates.readerFollowUp;\r\n    \r\n    const { error } = await supabase\r\n      .from('reviews')\r\n      .update(updateData)\r\n      .eq('id', reviewId);\r\n    \r\n    if (error) throw error;\r\n  } catch (error) {\r\n    console.error('Error updating review:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Follow Management\r\nexport const followAuthor = async (readerId: string, authorId: string) => {\r\n  try {\r\n    // Check if already following\r\n    const { data: existingFollow } = await supabase\r\n      .from('follows')\r\n      .select('id')\r\n      .eq('reader_id', readerId)\r\n      .eq('author_id', authorId)\r\n      .single();\r\n    \r\n    if (existingFollow) {\r\n      throw new Error('Already following this author');\r\n    }\r\n    \r\n    const { data, error } = await supabase\r\n      .from('follows')\r\n      .insert({\r\n        reader_id: readerId,\r\n        author_id: authorId,\r\n      })\r\n      .select()\r\n      .single();\r\n    \r\n    if (error) throw error;\r\n    \r\n    // Update reader's followed authors\r\n    const { data: user } = await supabase\r\n      .from('users')\r\n      .select('followed_authors')\r\n      .eq('id', readerId)\r\n      .single();\r\n    \r\n    if (user) {\r\n      const updatedFollowedAuthors = [...(user.followed_authors || []), authorId];\r\n      await supabase\r\n        .from('users')\r\n        .update({ followed_authors: updatedFollowedAuthors })\r\n        .eq('id', readerId);\r\n    }\r\n    \r\n    return data.id;\r\n  } catch (error) {\r\n    console.error('Error following author:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const unfollowAuthor = async (readerId: string, authorId: string) => {\r\n  try {\r\n    const { error } = await supabase\r\n      .from('follows')\r\n      .delete()\r\n      .eq('reader_id', readerId)\r\n      .eq('author_id', authorId);\r\n    \r\n    if (error) throw error;\r\n    \r\n    // Update reader's followed authors\r\n    const { data: user } = await supabase\r\n      .from('users')\r\n      .select('followed_authors')\r\n      .eq('id', readerId)\r\n      .single();\r\n    \r\n    if (user) {\r\n      const updatedFollowedAuthors = (user.followed_authors || []).filter((id: string) => id !== authorId);\r\n      await supabase\r\n        .from('users')\r\n        .update({ followed_authors: updatedFollowedAuthors })\r\n        .eq('id', readerId);\r\n    }\r\n  } catch (error) {\r\n    console.error('Error unfollowing author:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const getAuthorFollowers = async (authorId: string): Promise<Follow[]> => {\r\n  try {\r\n    const { data, error } = await supabase\r\n      .from('follows')\r\n      .select('*')\r\n      .eq('author_id', authorId);\r\n    \r\n    if (error) throw error;\r\n    \r\n    return (data || []).map(follow => ({\r\n      id: follow.id,\r\n      readerId: follow.reader_id,\r\n      authorId: follow.author_id,\r\n      followedAt: follow.followed_at,\r\n    } as Follow));\r\n  } catch (error) {\r\n    console.error('Error getting author followers:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Check if user has purchased a book\r\nexport const hasUserPurchasedBook = async (userId: string, bookId: string): Promise<boolean> => {\r\n  try {\r\n    const user = await getUserById(userId);\r\n    return user?.purchasedBooks?.includes(bookId) || false;\r\n  } catch (error) {\r\n    console.error('Error checking book purchase:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Analytics\r\nexport const getAuthorAnalytics = async (authorId: string): Promise<AuthorAnalytics | null> => {\r\n  try {\r\n    // For Supabase, we'll calculate analytics on demand from the users table\r\n    const { data: user, error } = await supabase\r\n      .from('users')\r\n      .select('total_books, total_sales, total_revenue')\r\n      .eq('id', authorId)\r\n      .single();\r\n    \r\n    if (error && error.code !== 'PGRST116') throw error;\r\n    if (!user) return null;\r\n    \r\n    // Get additional analytics from books table\r\n    const { data: books } = await supabase\r\n      .from('books')\r\n      .select('sales, revenue, average_rating')\r\n      .eq('author_id', authorId);\r\n    \r\n    const topBook = books?.reduce((prev, current) => \r\n      (prev.sales > current.sales) ? prev : current\r\n    );\r\n    \r\n    return {\r\n      authorId,\r\n      totalBooks: user.total_books || 0,\r\n      totalSales: user.total_sales || 0,\r\n      totalRevenue: user.total_revenue || 0,\r\n      averageRating: books?.reduce((sum, book) => sum + (book.average_rating || 0), 0) / (books?.length || 1) || 0,\r\n      topSellingBook: topBook ? {\r\n        title: '', // We'd need to join with book details\r\n        sales: topBook.sales || 0\r\n      } : undefined,\r\n      monthlyStats: [], // This would require more complex queries\r\n      lastUpdated: new Date().toISOString(),\r\n    } as AuthorAnalytics;\r\n  } catch (error) {\r\n    console.error('Error getting author analytics:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const updateAuthorAnalytics = async (authorId: string, updates: Partial<AuthorAnalytics>) => {\r\n  try {\r\n    // In Supabase, we update the user record directly\r\n    const updateData: any = {};\r\n    if (updates.totalBooks !== undefined) updateData.total_books = updates.totalBooks;\r\n    if (updates.totalSales !== undefined) updateData.total_sales = updates.totalSales;\r\n    if (updates.totalRevenue !== undefined) updateData.total_revenue = updates.totalRevenue;\r\n    \r\n    if (Object.keys(updateData).length > 0) {\r\n      updateData.updated_at = new Date().toISOString();\r\n      \r\n      const { error } = await supabase\r\n        .from('users')\r\n        .update(updateData)\r\n        .eq('id', authorId);\r\n      \r\n      if (error) throw error;\r\n    }\r\n  } catch (error) {\r\n    console.error('Error updating author analytics:', error);\r\n    throw error;\r\n  }\r\n};"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1933, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rajde/OneDrive/Desktop/Book_Store_Management/src/lib/auth.ts"],"sourcesContent":["import { supabase } from './supabase';\r\nimport { createUser, getUserByEmail } from './database';\r\nimport { User, UserRole, AuthUser } from './types';\r\nimport bcrypt from 'bcryptjs';\r\nimport jwt from 'jsonwebtoken';\r\nimport { AuthError, User as SupabaseUser } from '@supabase/supabase-js';\r\n\r\n// Register a new user\r\nexport const registerUser = async (\r\n  email: string, \r\n  password: string, \r\n  firstName: string, \r\n  lastName: string, \r\n  role: UserRole\r\n): Promise<AuthUser> => {\r\n  try {\r\n    // Check if user already exists\r\n    const existingUser = await getUserByEmail(email);\r\n    if (existingUser) {\r\n      throw new Error('User with this email already exists');\r\n    }\r\n\r\n    // Create user with Supabase Auth\r\n    const { data: authData, error: authError } = await supabase.auth.signUp({\r\n      email,\r\n      password,\r\n      options: {\r\n        data: {\r\n          first_name: firstName,\r\n          last_name: lastName,\r\n          role: role,\r\n        }\r\n      }\r\n    });\r\n\r\n    if (authError) throw authError;\r\n    if (!authData.user) throw new Error('Failed to create user');\r\n\r\n    // Hash password for database storage\r\n    const hashedPassword = await bcrypt.hash(password, 12);\r\n\r\n    // Create user document in Supabase database\r\n    const userData: Omit<User, 'id'> = {\r\n      firstName,\r\n      lastName,\r\n      email,\r\n      password: hashedPassword,\r\n      role,\r\n      createdAt: new Date(),\r\n      isActive: true,\r\n    };\r\n\r\n    await createUser(userData);\r\n\r\n    return {\r\n      uid: authData.user.id,\r\n      email: authData.user.email!,\r\n      role,\r\n      firstName,\r\n      lastName,\r\n    };\r\n  } catch (error) {\r\n    console.error('Error registering user:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Sign in user\r\nexport const signInUser = async (email: string, password: string): Promise<AuthUser> => {\r\n  try {\r\n    // Get user from database to check role and status\r\n    const user = await getUserByEmail(email);\r\n    if (!user) {\r\n      throw new Error('User not found');\r\n    }\r\n\r\n    if (!user.isActive) {\r\n      throw new Error('Account is deactivated');\r\n    }\r\n\r\n    // Sign in with Supabase Auth\r\n    const { data: authData, error: authError } = await supabase.auth.signInWithPassword({\r\n      email,\r\n      password,\r\n    });\r\n\r\n    if (authError) throw authError;\r\n    if (!authData.user) throw new Error('Authentication failed');\r\n\r\n    return {\r\n      uid: authData.user.id,\r\n      email: authData.user.email!,\r\n      role: user.role,\r\n      firstName: user.firstName,\r\n      lastName: user.lastName,\r\n    };\r\n  } catch (error) {\r\n    console.error('Error signing in user:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Sign out user\r\nexport const signOutUser = async (): Promise<void> => {\r\n  try {\r\n    const { error } = await supabase.auth.signOut();\r\n    if (error) throw error;\r\n  } catch (error) {\r\n    console.error('Error signing out user:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Get current user session\r\nexport const getCurrentUser = async (): Promise<SupabaseUser | null> => {\r\n  try {\r\n    const { data: { user }, error } = await supabase.auth.getUser();\r\n    if (error) throw error;\r\n    return user;\r\n  } catch (error) {\r\n    console.error('Error getting current user:', error);\r\n    return null;\r\n  }\r\n};\r\n\r\n// Generate JWT token\r\nexport const generateJWTToken = (user: AuthUser): string => {\r\n  const payload = {\r\n    uid: user.uid,\r\n    email: user.email,\r\n    role: user.role,\r\n    firstName: user.firstName,\r\n    lastName: user.lastName,\r\n  };\r\n\r\n  return jwt.sign(payload, process.env.JWT_SECRET!, {\r\n    expiresIn: '24h',\r\n  });\r\n};\r\n\r\n// Verify JWT token\r\nexport const verifyJWTToken = (token: string): AuthUser => {\r\n  try {\r\n    const decoded = jwt.verify(token, process.env.JWT_SECRET!) as AuthUser;\r\n    return decoded;\r\n  } catch (error) {\r\n    throw new Error('Invalid token');\r\n  }\r\n};\r\n\r\n// Auth state listener using Supabase\r\nexport const onAuthStateChange = (callback: (user: SupabaseUser | null) => void) => {\r\n  const { data: { subscription } } = supabase.auth.onAuthStateChange((_event, session) => {\r\n    callback(session?.user || null);\r\n  });\r\n\r\n  // Return unsubscribe function\r\n  return () => {\r\n    subscription.unsubscribe();\r\n  };\r\n};\r\n\r\n// Validate password strength\r\nexport const validatePassword = (password: string): boolean => {\r\n  // At least 8 characters, 1 uppercase, 1 lowercase, 1 number\r\n  const passwordRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)[a-zA-Z\\d@$!%*?&]{8,}$/;\r\n  return passwordRegex.test(password);\r\n};\r\n\r\n// Validate email format\r\nexport const validateEmail = (email: string): boolean => {\r\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n  return emailRegex.test(email);\r\n};\r\n\r\n// Hash password\r\nexport const hashPassword = async (password: string): Promise<string> => {\r\n  return await bcrypt.hash(password, 12);\r\n};\r\n\r\n// Compare password\r\nexport const comparePassword = async (password: string, hashedPassword: string): Promise<boolean> => {\r\n  return await bcrypt.compare(password, hashedPassword);\r\n};"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2098, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rajde/OneDrive/Desktop/Book_Store_Management/src/context/AuthContext.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { createContext, useContext, useEffect, useState, ReactNode } from 'react';\r\nimport { onAuthStateChange } from '@/lib/auth';\r\nimport { getUserById } from '@/lib/database';\r\nimport { AuthUser, User } from '@/lib/types';\r\nimport { User as SupabaseUser } from '@supabase/supabase-js';\r\n\r\ninterface AuthContextType {\r\n  user: User | null;\r\n  authUser: AuthUser | null;\r\n  loading: boolean;\r\n  logout: () => Promise<void>;\r\n  refreshUser: () => Promise<void>;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport function AuthProvider({ children }: { children: ReactNode }) {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [authUser, setAuthUser] = useState<AuthUser | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    // Check localStorage for user data\r\n    const storedUser = localStorage.getItem('currentUser');\r\n    if (storedUser) {\r\n      try {\r\n        const userData = JSON.parse(storedUser);\r\n        setAuthUser(userData);\r\n        // Fetch full user data from database\r\n        fetchUserData(userData.uid);\r\n      } catch (error) {\r\n        console.error('Error parsing stored user data:', error);\r\n        localStorage.removeItem('currentUser');\r\n      }\r\n    }\r\n\r\n    // Listen for Supabase auth state changes\r\n    const unsubscribe = onAuthStateChange(async (supabaseUser: SupabaseUser | null) => {\r\n      if (supabaseUser) {\r\n        // User is signed in\r\n        try {\r\n          const userData = await getUserById(supabaseUser.id);\r\n          if (userData) {\r\n            setUser(userData);\r\n            const authUserData: AuthUser = {\r\n              uid: supabaseUser.id,\r\n              email: supabaseUser.email!,\r\n              role: userData.role,\r\n              firstName: userData.firstName,\r\n              lastName: userData.lastName,\r\n            };\r\n            setAuthUser(authUserData);\r\n            localStorage.setItem('currentUser', JSON.stringify(authUserData));\r\n          }\r\n        } catch (error) {\r\n          console.error('Error fetching user data:', error);\r\n        }\r\n      } else {\r\n        // User is signed out\r\n        setUser(null);\r\n        setAuthUser(null);\r\n        localStorage.removeItem('currentUser');\r\n      }\r\n      setLoading(false);\r\n    });\r\n\r\n    // Listen for storage events (for logout from other tabs)\r\n    const handleStorageChange = (e: StorageEvent) => {\r\n      if (e.key === 'currentUser' && e.newValue === null) {\r\n        setUser(null);\r\n        setAuthUser(null);\r\n      }\r\n    };\r\n\r\n    window.addEventListener('storage', handleStorageChange);\r\n\r\n    return () => {\r\n      unsubscribe();\r\n      window.removeEventListener('storage', handleStorageChange);\r\n    };\r\n  }, []);\r\n\r\n  const fetchUserData = async (userId: string) => {\r\n    try {\r\n      const userData = await getUserById(userId);\r\n      if (userData) {\r\n        setUser(userData);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching user data:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const refreshUser = async () => {\r\n    if (authUser) {\r\n      await fetchUserData(authUser.uid);\r\n    }\r\n  };\r\n\r\n  const logout = async () => {\r\n    try {\r\n      const response = await fetch('/api/auth/logout', {\r\n        method: 'POST',\r\n      });\r\n\r\n      if (response.ok) {\r\n        setUser(null);\r\n        setAuthUser(null);\r\n        localStorage.removeItem('currentUser');\r\n        // Dispatch storage event for other tabs\r\n        window.dispatchEvent(new StorageEvent('storage', {\r\n          key: 'currentUser',\r\n          newValue: null,\r\n          oldValue: localStorage.getItem('currentUser'),\r\n        }));\r\n      }\r\n    } catch (error) {\r\n      console.error('Logout error:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={{\r\n      user,\r\n      authUser,\r\n      loading,\r\n      logout,\r\n      refreshUser,\r\n    }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useAuth() {\r\n  const context = useContext(AuthContext);\r\n  if (context === undefined) {\r\n    throw new Error('useAuth must be used within an AuthProvider');\r\n  }\r\n  return context;\r\n}\r\n\r\n// Hook for checking if user has specific role\r\nexport function useRole(requiredRole: string) {\r\n  const { authUser } = useAuth();\r\n  return authUser?.role === requiredRole;\r\n}\r\n\r\n// Hook for checking if user is authenticated\r\nexport function useIsAuthenticated() {\r\n  const { authUser } = useAuth();\r\n  return !!authUser;\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}